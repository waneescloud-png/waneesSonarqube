<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="HITR_MOBLIE.views.CarsPage"
             Title="إدارة السيارات"
             BackgroundColor="#F0F2F5"
             FlowDirection="RightToLeft">

    <Grid RowDefinitions="Auto, Auto, *" Padding="15" RowSpacing="15">

        <Frame Grid.Row="0" CornerRadius="15" Padding="15" BackgroundColor="White" HasShadow="True" BorderColor="#D1D1D1">
            <VerticalStackLayout Spacing="10">
                <Label Text="بيانات السيارة" FontAttributes="Bold" FontSize="18" TextColor="#2B3A67" Margin="0,0,0,5"/>

                <Entry x:Name="carid" Placeholder="رقم السيارة" Keyboard="Numeric" 
               BackgroundColor="White" TextColor="Black" PlaceholderColor="Gray"/>

                <Entry x:Name="carname" Placeholder="اسم السيارة" 
               BackgroundColor="White" TextColor="Black" PlaceholderColor="Gray"/>

                <Entry x:Name="carmodel" Placeholder="الموديل" 
               BackgroundColor="White" TextColor="Black" PlaceholderColor="Gray"/>

                <Entry x:Name="color" Placeholder="اللون" 
               BackgroundColor="White" TextColor="Black" PlaceholderColor="Gray"/>

                <Entry x:Name="carpanel" Placeholder="رقم اللوحة" 
               BackgroundColor="White" TextColor="Black" PlaceholderColor="Gray"/>
            </VerticalStackLayout>
        </Frame>
        <VerticalStackLayout Grid.Row="1" Spacing="10">
            <Grid ColumnDefinitions="*, *, *" ColumnSpacing="10">
                <Button Grid.Column="0" Text="إضافة" Clicked="add_Click" BackgroundColor="#3498DB" TextColor="White" CornerRadius="8"/>
                <Button Grid.Column="1" Text="تعديل" Clicked="edit_Click" BackgroundColor="#F39C12" TextColor="White" CornerRadius="8"/>
                <Button Grid.Column="2" Text="حفظ" Clicked="save_Click" BackgroundColor="#27AE60" TextColor="White" CornerRadius="8"/>
            </Grid>
            <Grid ColumnDefinitions="*, *, *" ColumnSpacing="10">
                <Button Grid.Column="0" Text="حذف" Clicked="del_Click" BackgroundColor="#E74C3C" TextColor="White" CornerRadius="8"/>
                <Button Grid.Column="1" Text="تراجع" Clicked="undo_Click" BackgroundColor="#95A5A6" TextColor="White" CornerRadius="8"/>
                <Button Grid.Column="2" Text="خروج" Clicked="button6_Click" BackgroundColor="#2C3E50" TextColor="White" CornerRadius="8"/>
            </Grid>
        </VerticalStackLayout>
        <CollectionView Grid.Row="2" 
                x:Name="listcar" 
                SelectionMode="Single" 
                SelectionChanged="listcar_SelectedIndexChanged">

            <CollectionView.Header>
                <Label Text="قائمة السيارات المسجلة" FontAttributes="Bold" Margin="0,10" TextColor="#555"/>
            </CollectionView.Header>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="0,5" Padding="12" CornerRadius="10" BackgroundColor="White" BorderColor="#EEE">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup Name="CommonStates">
                                <VisualState Name="Normal" />
                                <VisualState Name="Selected">
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="#E3F2FD" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <HorizontalStackLayout Spacing="15">
                            <BoxView Color="#3498DB" WidthRequest="5" CornerRadius="2"/>
                            <VerticalStackLayout VerticalOptions="Center">
                                <Label Text="{Binding CarName}" FontAttributes="Bold" FontSize="16" TextColor="Black"/>
                                <Label Text="{Binding CarModel}" FontSize="13" TextColor="Gray"/>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>